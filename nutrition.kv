<WelcomeScreen>:
    name: 'welcome'
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        BoxLayout:
            size_hint: (0.85, 0.5)
            orientation: 'vertical'
            Label:
                text: 'Welcome to Nutrition Buddy\nSelect a calculator to get started.'
            BoxLayout:
                Button:
                    text: "Conversions"
                    on_press: root.manager.current = 'conversion'
                Button:
                    text: "Mifflin-St.Jeor"
                    on_press: root.manager.current = 'Mifflin'

        
<EnergyNeedsScreen>:
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'
        BoxLayout:
            size_hint: (0.5, 0.5)
            Button:
                text: "Mifflin-St.Jeor"
                on_press: root.manager.current = 'Mifflin'
            Button:
                text: "Coming Soon"
            

<ConversionScreen>:
    name: 'conversion'
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        BoxLayout:
            size_hint: (0.75, 0.75)
            orientation: 'vertical'
            
            Label:
                text: "Conversion Calculator"
                
            BoxLayout:
                TextInput:
                    multiline: False
                    text: '0'
                    id: inputWeight
                    on_text: convertedWeight.text = root.ConvertMeasure('weight', self.text)
                Button:
                    text: "Pounds \n    >>\nKilograms"
                    on_press: root.SetButtonText(self)
                    on_release: convertedWeight.text = root.ConvertMeasure('weight', inputWeight.text)
                TextInput:
                    id: convertedWeight
                    disabled: True
                    
            BoxLayout:
                TextInput:
                    multiline: False
                    text: '0'
                    id: inputHeight
                    on_text: convertedHeight.text = root.ConvertMeasure('height', self.text)
                    input_type: 'number'
                Button:
                    text: "Inches \n   >>\nCentimeters"
                    on_press: root.SetButtonText(self)
                    on_release: convertedHeight.text = root.ConvertMeasure('height', inputHeight.text)
                TextInput:
                    id: convertedHeight
                    disabled: True
            Label:
                
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'bottom'
        Button:
            size_hint: (0.75, 0.1)
            text: 'Return to Menu'
            on_press: root.manager.current = 'welcome'
                
<MifflinStJeorScreen>
    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'top'
        
        BoxLayout:
            size_hint: (1, 0.75)
            orientation: 'vertical'
            Label:
                text: 'Mifflin-St.Jeor'
                font_size: '40dp'
            GridLayout:
                cols: 3
                Label:
                    text: 'Weight'
                    font_size: '32dp'
                TextInput:
                    id: weightInput
                    font_size: '24dp'
                    text: ' '
                    input_type: 'number'
                    size_hint_y: None
                    height: self.minimum_height
                    
                Spinner:
                    id: weightUnit
                    font_size: '24dp'
                    text: 'kg'
                    height: weightInput.height
                    values: ('kg', 'lbs')
                    size_hint_y: None
                    
            GridLayout:
                cols: 3
                Label:
                    text: 'Height'
                    font_size: '32dp'
                TextInput:
                    id: heightInput
                    font_size: '24dp'
                    text: ' '
                    input_type: 'number'
                    size_hint_y: None
                    height: self.minimum_height
                    
                Spinner:
                    id: heightUnit
                    text: 'cm'
                    font_size: '24dp'
                    height: heightInput.height
                    values: ('cm', 'in')
                    size_hint_y: None
                    
            GridLayout:
                cols: 2
                Label:
                    text: 'Age'
                    font_size: '32dp'
                TextInput:
                    id: ageInput
                    font_size: '24dp'
                    text: ' '
                    input_type: 'number'
                    size_hint_y: None
                    height: self.minimum_height
                    
            GridLayout:
                cols: 2
                Label:
                    text: 'Gender'
                    font_size: '32dp'
                Spinner:
                    id: gender
                    text: 'Female'
                    values: ('Male', 'Female')
                    font_size: '24dp'
            BoxLayout:       
                Button:
                    text: 'Calculate'
                    font_size: '24dp'
                    on_press: outputLabel.text = root.Calculations({'wtValue': weightInput.text.strip(), 'wtUnit': weightUnit.text, 'htValue': heightInput.text.strip(), 'htUnit': heightUnit.text, 'age': ageInput.text.strip(), 'gender': gender.text})
                Button:
                    text: 'Clear Fields'
                    font_size: '24dp'
                    on_release: weightInput.text, heightInput.text, ageInput.text = '', '', ''
                
            BoxLayout:
                Label:
                    text: '\n\nEnergy:\nBMI:\nIBW:\nABW:'
                    font_size: '24dp'
                    size_hint_x: 0.2

                Label:
                    text: ' '
                    font_size: '24dp'
                    id: outputLabel

                
                    

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'bottom'
        BoxLayout:
            size_hint: (1, 0.065)
            Button:
                text: 'Add Factor(s)'
                on_press: root.openFactorPopup(outputLabel.text)
            Button:
                text:  'Quit'
                
<FactorPopup>
    title: 'Activity/Stress Factor'
    size_hint: (0.95, 0.75)
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            Label:
                text: 'Basic Needs: ' + root.mifflinValue
            Label:
                id: updatedNeedsText
                text: 'Needs with Factors:' + root.updatedMifflin
        Spinner:
            id: activityFactor
            text: '1.00 - No Activity'
            values: root.activityValues
            on_text: updatedNeedsText.text = root.updateFactors(self.text[:3], stressFactor.text[:3])
        Spinner:
            id: stressFactor
            text: '1.00 - No Stress'
            values: root.stressValues
            on_text: updatedNeedsText.text = root.updateFactors(activityFactor.text[:3], self.text[:3])
